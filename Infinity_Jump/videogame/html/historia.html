<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/historia.css">
    <script src="../js/paginaLogin/login.js"></script>
    <script src="../js/ajustes_y_sonido/ajustes.js"></script>
    <script src="../js/ajustes_y_sonido/sound.js"></script>
    <title>Inifnity Jump </title>
</head>
<body>  
    <header>
        <h1>INFINITY JUMP</h1>
    </header>    
    <div id="canvasContainer">
        <canvas id="canvas"></canvas>
        <button id="homeButton" onclick="openMain()">Inicio</button>
        <button id="ajustesButton" onclick="openAjustes()">Ajustes</button>
        <h1>Cómo empezó...</h1>
        <div id="texto">
            <p>Desde que Malvin era chico siempre ha amado las estrellas, de hecho, todas las noches las admira desde su telescopio. Hasta que un día notó algo estaba diferente...</p>
            <p>Se dió cuenta de que la luna tenía una mancha que no había visto antes y se propuso descubrir qué era.</p>
            <p>¡Alguien estaba en la luna! Una hermosa malvadisca con la que Malvin quedó encantado, en ese preciso instante supo que ella era la indicada para él.</p>
            <p>Sin importar los desafíos él tenía que llegar a ella; comprendió que nunca iba a poder descansar hasta conquistarla y estar juntos.</p>    
            <p>Acompaña a Malvin a esta historia de amor, en la que los diferentes desafíos no serán un impedimiento para ser felices.</p>
        </div>
        <button id="gameButton" onclick="openLogin()">Jugar</button>
        <div id="ajustes" class="ajustes">
            <div class="ajustes-content">
                <span class="close" onclick="closeAjustes()">&times;</span>
                <p>Música</p>
                <label class="switch">
                    <input type="checkbox" id="musicCheckbox" checked>
                    <span class="slider round"></span>
                </label>
                <p>Efectos de sonido</p>
                <label class="switch">
                    <input type="checkbox" id="soundEffectsCheckbox" checked>
                    <span class="slider round"></span>
                </label>
            </div>
        </div>
    
    </div>
    </div>
      
    <footer>
        <p>Silver Way Studios &copy; 2025</p>
    </footer>
    </body>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            const canvasWidth = canvas.width = 1150;
            const canvasHeight = canvas.height = 650;

            const video = document.createElement('video');
            video.src = '../Assets/historiaFondo.mp4';
            video.muted = true;
            video.loop = true;
            video.playsInline = true;

            video.addEventListener('canplay', () => {
                video.play();
                draw();
            });

            function draw() {
                if (video.readyState >= 2) {
                    ctx.drawImage(video, 0, 0, canvasWidth, canvasHeight);
                }
                requestAnimationFrame(draw);
            }
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const musicCheckbox = document.getElementById("musicCheckbox");
        
            const iniciarMusicaIntro = () => {
                if (musicCheckbox && musicCheckbox.checked) {
                    reproducirMusica("menu");
                }
            };
        
            document.body.addEventListener("click", iniciarMusicaIntro);
        });
    </script>
</html>